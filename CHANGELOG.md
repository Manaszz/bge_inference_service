# Changelog
Все заметные изменения этого репозитория будут документироваться в этом файле.

Формат основан на принципах [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
и проект придерживается семантического версионирования (SemVer) по мере появления версий.

## [Unreleased]

## [0.2.0] - 2025-12-19
### Added
- Очередь + микробатчинг для эмбеддингов (dense/sparse/hybrid) для эффективной обработки параллельных запросов и лучшей утилизации GPU.
- Новые переменные окружения для настройки микробатчинга:
  - `EMBEDDING_MICROBATCH_ENABLED`
  - `EMBEDDING_MICROBATCH_MAX_WAIT_MS`
  - `EMBEDDING_MICROBATCH_MAX_BATCH_TEXTS`
  - `EMBEDDING_MICROBATCH_QUEUE_MAXSIZE`
- Документация по multi-GPU рекомендации (1 реплика сервиса = 1 GPU).
- Документация с примером сопоставления входных текстов и эмбеддингов по `index`/порядку (полезно для загрузки в Qdrant с метаданными).

### Changed
- Endpoints эмбеддингов переведены на `async def` для корректного ожидания очереди микробатчера; тяжёлые вычисления по-прежнему выполняются в threadpool через `anyio.to_thread`.
- `BGEEngine` расширен helper-методами для переиспользования подготовки текстов и низкоуровневого вызова `encode()` в микробатчере.


